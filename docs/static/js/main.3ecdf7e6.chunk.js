(this["webpackJsonptuten-app"]=this["webpackJsonptuten-app"]||[]).push([[0],{198:function(e,t,n){},199:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n(40),i=n.n(r),s=n(8),o=n(21),l=n(3),b=n(5),u=n(90),d=n(31),j=n(26),m=n.n(j),h=n(46),p=n(88),O=n.n(p),f="[Auth] Login",x="[Auth] Logout",g="[Auth] Error",v={isAuthenticated:!1},k=function(e){return{type:f,payload:e}},N=function(e){return{type:g,payload:e}},y=function(){return function(e){localStorage.clear(),e({type:x})}},w=function(){var e=Object(s.c)((function(e){return e.auth})).errorAuth,t=Object(s.b)(),n=Object(u.a)({initialValues:{email:"testapis@tuten.cl",password:"1234",app:"APP_BCK"},validationSchema:d.a().shape({email:d.b().email("Invalid email").required("Required"),password:d.b().min(4,"Password is to short - should be 4 chars minimun.").required("Required"),app:d.b().required("Required")}),onSubmit:function(e){t(function(e){var t=e.email,n=e.password,a=e.app;return function(){var e=Object(h.a)(m.a.mark((function e(c){var r,i,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dev.tuten.cl/TutenREST/rest/user/".concat(t),{method:"PUT",headers:{accept:"application/json","content-type":"application/json",app:a,password:n},body:JSON.stringify({email:t})}).catch((function(e){console.log("err",e.response)}));case 3:if(!(r=e.sent).ok){e.next=13;break}return e.next=7,r.json();case 7:i=e.sent,s={token:i.sessionTokenBck,firstName:i.firstName,lastName:i.lastName,email:i.email,app:a},localStorage.setItem("user",JSON.stringify(s)),c(k(s)),e.next=15;break;case 13:c(N(!0)),O.a.fire({icon:"error",title:"Authentication Error",text:"Email or Password are Wrong"});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("error pendejo mont",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}()}(Object(b.a)({},e)))}}),r=n.values,i=n.handleChange,o=n.handleSubmit,l=n.errors,j=n.isValid,p=n.isSubmitting,f=n.setSubmitting;return Object(c.useEffect)((function(){f(!1),t(N(!1))}),[t,f,e]),Object(a.jsx)("div",{className:"container-fluid",children:Object(a.jsxs)("div",{className:"row",style:{height:"100vh"},children:[Object(a.jsx)("div",{className:"col-md-6 d-flex justify-content-center align-items-center",children:Object(a.jsxs)("form",{onSubmit:o,className:"w-75",children:[Object(a.jsx)("h2",{className:"text-black-50",children:"Sign in."}),Object(a.jsx)("p",{className:"mt-3 text-muted",children:"Give us some of your information to get free access to fieldly"}),Object(a.jsxs)("div",{className:"mt-4 mb-3",children:[Object(a.jsx)("label",{htmlFor:"email",className:"fw-bold  text-black-50",children:"Your e-mail"}),Object(a.jsxs)("div",{className:"mt-2",children:[Object(a.jsx)("input",{type:"email",placeholder:"elviserranoh@gmail.com",className:"form-control",name:"email",id:"email",value:r.email,onChange:i}),l.email?Object(a.jsx)("div",{className:"mt-1 text-danger",children:l.email}):null]})]}),Object(a.jsxs)("div",{className:"mt-3 mb-3",children:[Object(a.jsx)("label",{htmlFor:"password",className:"fw-bold text-black-50",children:"Password"}),Object(a.jsxs)("div",{className:"mt-2",children:[Object(a.jsx)("input",{type:"password",className:"form-control",name:"password",id:"password",value:r.password,onChange:i}),l.password&&Object(a.jsx)("div",{className:"mt-1 text-danger",children:l.password})]})]}),Object(a.jsxs)("div",{className:"mt-3 mb-3",children:[Object(a.jsx)("label",{htmlFor:"app",className:"fw-bold text-black-50",children:"App"}),Object(a.jsxs)("div",{className:"mt-2",children:[Object(a.jsx)("input",{type:"text",className:"form-control",name:"app",id:"app",value:r.app,onChange:i}),l.app&&Object(a.jsx)("div",{className:"mt-1 text-danger",children:l.app})]})]}),Object(a.jsx)("button",{className:"mt-3 btn btn-primary w-100",disabled:!j||p,children:"Log In"})]})}),Object(a.jsx)("div",{className:"col-md-6 d-none d-md-flex justify-content-center align-items-end",style:{backgroundColor:"#5923B7"},children:Object(a.jsx)("p",{className:"text-white fw-bold",style:{fontSize:12},children:"@dev.tuten.cl"})})]})})},I=n(6),A=n(13),F="[Booking] Load",S=n(42),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(A.a)(t,2),a=n[0],r=n[1],i=function(e){var t=e.target,n=t.name,c=t.value;r(Object(b.a)(Object(b.a)({},a),{},Object(S.a)({},n,c)))},s=function(){r(e)};return[a,i,s]};n(198);function P(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.booking})),n=Object(c.useState)([]),r=Object(A.a)(n,2),i=r[0],o=r[1],l=C({email:"contacto@tuten.cl"}),b=Object(A.a)(l,2),u=b[0],d=b[1],j=C({bookingField:"bookingId",bookingFilter:"igual",bookingFilterValue:""}),p=Object(A.a)(j,2),O=p[0],f=p[1],x=O.bookingFilterValue,g=O.bookingFilter,v=O.bookingField;Object(c.useEffect)((function(){var t;e((t=u.email,function(){var e=Object(h.a)(m.a.mark((function e(n,a){var c,r,i,s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a(),r=c.auth,e.next=3,fetch("https://dev.tuten.cl/TutenREST/rest/user/".concat(t,"/bookings?current=").concat(r.current),{method:"GET",headers:{Accept:"Application/json","Content-Type":"Application/json",App:r.app,adminemail:r.email,token:r.token}});case 3:if(!(i=e.sent).ok){e.next=10;break}return e.next=7,i.json();case 7:s=e.sent,o=s.map((function(e){return{bookingId:e.bookingId,firstName:e.tutenUserClient.firstName,lastName:e.tutenUserClient.lastName,bookingTime:e.bookingTime,streetAddress:e.locationId.streetAddress,bookingPrice:e.bookingPrice}})),n({type:F,payload:o});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))}),[e,u]),Object(c.useEffect)((function(){o(Object(I.a)(t))}),[t]);return Object(a.jsxs)("div",{className:"container-fluid  mt-4",children:[Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"emailClient",className:"form-label",children:"Email"}),Object(a.jsx)("input",{type:"text",className:"form-control",name:"email",id:"emailClient",onChange:d,value:u.email,placeholder:"elvis@dev.tuten.cl"})]}),Object(a.jsxs)("div",{className:"mr-2",children:[Object(a.jsx)("label",{htmlFor:"bookingFilterValue",className:"form-label",children:"Filtrar"}),Object(a.jsxs)("div",{className:"d-flex flex-row",children:[Object(a.jsxs)("select",{name:"bookingField",onChange:f,value:O.bookingField,children:[Object(a.jsx)("option",{value:"bookingId",children:"ID"}),Object(a.jsx)("option",{value:"bookingPrice",children:"Price"})]}),Object(a.jsx)("input",{type:"text",className:"form-control mx-3",name:"bookingFilterValue",value:O.bookingFilterValue,onChange:f,id:"bookingFilterValue",placeholder:" Ej. 233"}),Object(a.jsxs)("select",{name:"bookingFilter",onChange:f,value:O.bookingFilter,children:[Object(a.jsx)("option",{value:"igual",children:"Igual"}),Object(a.jsx)("option",{value:"mayor_igual",children:"Mayor o Igual"}),Object(a.jsx)("option",{value:"menor_igual",children:"Menor o Igual"})]}),Object(a.jsx)("button",{onClick:function(){if("bookingId"===v){var e=function(e){var t=e.state,n=e.value,a=e.filter;return"igual"===a?t.filter((function(e){return parseInt(e.bookingId)===parseInt(n)})):"mayor_igual"===a?t.filter((function(e){return parseInt(e.bookingId)>=parseInt(n)})):t.filter((function(e){return parseInt(e.bookingId)<=parseInt(n)}))}({state:t,value:x,filter:g});o(e)}else if("bookingPrice"===v){var n=function(e){var t=e.state,n=e.value,a=e.filter;return"igual"===a?t.filter((function(e){return parseInt(e.bookingPrice)===parseInt(n)})):"mayor_igual"===a?t.filter((function(e){return parseInt(e.bookingPrice)>=parseInt(n)})):t.filter((function(e){return parseInt(e.bookingPrice)<=parseInt(n)}))}({state:t,value:x,filter:g});o(n)}},className:"btn btn-primary btn-sm ml-1",children:"Filtrar"})]})]})]}),Object(a.jsxs)("table",{className:"table table-hover mt-3",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"BookingId"}),Object(a.jsx)("th",{scope:"col",children:"Cliente"}),Object(a.jsx)("th",{scope:"col",children:"Fecha de Creaci\xf3n"}),Object(a.jsx)("th",{scope:"col",children:"Direcci\xf3n"}),Object(a.jsx)("th",{scope:"col",children:"Precio"})]})}),Object(a.jsxs)("tbody",{className:"bg-white",children:[i.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:e.bookingId}),Object(a.jsx)("td",{children:"".concat(e.firstName," ").concat(e.lastName)}),Object(a.jsx)("td",{children:(t=e.bookingTime,new Date(t).toLocaleDateString())}),Object(a.jsx)("td",{children:e.streetAddress}),Object(a.jsx)("td",{children:e.bookingPrice})]},e.bookingId);var t})),0===i.length&&Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:"5",children:Object(a.jsx)("p",{className:"text-center",children:"No Hay registros para el cliente"})})})]})]})]})}n(199);var E=function(){var e=Object(s.c)((function(e){return e.auth})),t=Object(s.b)();return Object(a.jsxs)("nav",{className:"navbar px-4 align-items-center flex-row bg-white",children:[Object(a.jsx)(o.b,{to:"/",className:"navbar-brand text-black-50 fw-bold",children:"TutenApp"}),Object(a.jsxs)("div",{className:"d-flex flex-row justify-content-center",children:[Object(a.jsx)("i",{className:"icon-account"}),Object(a.jsx)("p",{className:"mx-2",style:{margin:0},children:"".concat(e.firstName," ").concat(e.lastName)}),Object(a.jsx)("i",{onClick:function(){t(y())},className:"fas fa-sign-out-alt d-flex align-items-center ml-1 cursor-pointer"})]})]})},T=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(E,{}),Object(a.jsx)(l.d,{children:Object(a.jsx)(l.b,{path:"/",component:P})})]})},V=n(47),q=function(e){var t=e.isAuthenticated,n=e.component,c=Object(V.a)(e,["isAuthenticated","component"]);return Object(a.jsx)("div",{className:"bg-w",children:Object(a.jsx)(l.b,Object(b.a)(Object(b.a)({},c),{},{render:function(e){return t?Object(a.jsx)(n,Object(b.a)({},e)):Object(a.jsx)(l.a,{to:{pathname:"/login"}})}}))})},B=function(e){var t=e.isAuthenticated,n=e.component,c=Object(V.a)(e,["isAuthenticated","component"]);return Object(a.jsx)(l.b,Object(b.a)(Object(b.a)({},c),{},{render:function(e){return t?Object(a.jsx)(l.a,{to:{pathname:"/"}}):Object(a.jsx)(n,Object(b.a)({},e))}}))},J=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})).isAuthenticated;return Object(c.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t&&e(k(t))}),[e]),Object(a.jsx)(o.a,{basename:"/",children:Object(a.jsx)("div",{children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(B,{exact:!0,path:"/login",component:w,isAuthenticated:t}),Object(a.jsx)(q,{path:"/",component:T,isAuthenticated:t})]})})})},L=n(25),R=n(89),_=Object(L.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(b.a)(Object(b.a)({},t.payload),{},{isAuthenticated:!0,current:!0,errorAuth:!1});case x:return{isAuthenticated:!1};case g:return console.log("error",t),Object(b.a)(Object(b.a)({},e),{},{errorAuth:t.payload});default:return e}},booking:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(I.a)(t.payload);default:return e}}}),D=Object(L.d)(_,Object(L.a)(R.a)),U=(n(201),function(){return Object(a.jsx)(s.a,{store:D,children:Object(a.jsx)(J,{})})});i.a.render(Object(a.jsx)(U,{}),document.getElementById("root"))}},[[202,1,2]]]);
//# sourceMappingURL=main.3ecdf7e6.chunk.js.map